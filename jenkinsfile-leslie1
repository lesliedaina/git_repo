pipeline {

    environment {
		DOCKERHUB_CREDENTIALS=credentials('dockerhub1')
	}


    agent any



options { buildDiscarder(logRotator(artifactDaysToKeepStr: '',
     artifactNumToKeepStr: '', daysToKeepStr: '3', numToKeepStr: '5'))
      disableConcurrentBuilds() }
      
    stages {
        stage('cleaning the environment') {
            steps {
                sh '''
                docker rmi -f $(docker images -a-q)
                '''
            }
            
            }
        }
    
    
    stage('build') {
            steps {
                sh '''
                docker build daina:01 .
                '''

            }
        }
   }

