pipeline {

    environment {
		DOCKERHUB_CREDENTIALS=credentials('dockerhub1')
	}


    agent any



options { '[buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '30', numToKeepStr: '')), disableConcurrentBuilds()]' }
    stages {
        stage('cleaning the environment') {
            steps {
                sh '''
                docker rmi -f $(docker images -a-q)
                '''
            }
            
            }
        }
    
    
    stage('build the image') {
            steps {
                sh '''
                docker build daina:01 .
                '''

            }
        }
   }
 }
